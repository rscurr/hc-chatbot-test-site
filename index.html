<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Chatbot Test</title>
</head>
<body>
  <div id="chat" style="max-width:400px;margin:2em auto;font-family:sans-serif">
    <div id="msgs" style="border:1px solid #ccc;height:200px;overflow:auto;padding:6px"></div>
    <input id="msg" style="width:70%">
    <button id="send">Send</button>
  </div>
  <script>
    const API="https://hansel-cottage.onrender.com/api/chat";
    const sid=localStorage.hc_sid||(localStorage.hc_sid=Math.random().toString(36).slice(2));
    const msgs=document.getElementById("msgs"),input=document.getElementById("msg");
    async function send(){
      const text=input.value.trim(); if(!text) return;
      msgs.innerHTML+=`<div>You: ${text}</div>`; input.value="";
      try{
        const r=await fetch(API,{method:"POST",headers:{"Content-Type":"application/json","X-Session-Id":sid},body:JSON.stringify({message:text})});
        const j=await r.json(); msgs.innerHTML+=`<div>Bot: ${j.answer||"â€¦"}</div>`; msgs.scrollTop=msgs.scrollHeight;
      }catch{ msgs.innerHTML+="<div>Bot: Error</div>"; }
    }
    document.getElementById("send").onclick=send;
    input.onkeypress=e=>e.key==="Enter"&&send();
  </script>
</body>
</html>
